return {
	"glacambre/firenvim",
	lazy = false, -- Wir laden es immer, um Fehler auszuschließen

	-- NEU: Das Syntax-Plugin als Abhängigkeit, damit "excel" als Filetype existiert
	-- dependencies = { "bfrg/vim-excel-formulas" },

	-- Nur zur Sicherheit: Das Build-Script
	build = ":call firenvim#install(0)",

	config = function()
		vim.g.firenvim_config = {
			localSettings = {
				[".*"] = {
					cmdline = "neovim",
					content = "text",
					priority = 0,
					-- WICHTIG 1: '*' heißt: Nimm ALLES (Inputs, Textareas, Divs)
					selector = "*",
					-- WICHTIG 2: 'always' heißt: Öffne dich SOFORT beim Reinklicken.
					takeover = "always",
				},
			},
		}

		if vim.g.started_by_firenvim == true then
			vim.o.laststatus = 0
			vim.o.showmode = false
			vim.o.ruler = false
			vim.o.number = false

			vim.api.nvim_create_autocmd({ "BufEnter" }, {
				pattern = { "*google.com*" },
				callback = function()
					-- HIER GEÄNDERT: Jetzt echte Excel-Syntax (dank des Plugins oben)
					vim.opt.filetype = "excel"
					vim.opt.wrap = true
					vim.opt.linebreak = true
				end,
			})
		end
	end,
}
